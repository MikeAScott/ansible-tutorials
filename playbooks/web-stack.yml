---
- name: Configure Web Server
  hosts: web
  become: true

  tasks:
    - name: Ensure Tomcat is installed
      package:
        name: 
          - tomcat
          - tomcat-webapps
        state: latest
        update_cache: yes
    - name: Ensure Tomcat is running
      service:
        name: tomcat
        state: started

- name: Configure DB Server
  hosts: db
  become: true
  tasks:
    - name: Ensure MySql Community repo is available
      yum: 
        name: http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm
        state: latest
        update_cache: yes
    - name: Ensure mySQL is installed
      yum:
        name: mysql-server
        state: latest
    - name: Ensure mySQL service is running
      service:
        name: mysqld
        state: started
